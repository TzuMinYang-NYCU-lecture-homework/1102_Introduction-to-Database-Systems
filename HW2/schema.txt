-- phpMyAdmin SQL Dump
-- version 5.1.3
-- https://www.phpmyadmin.net/
--
-- 主機： 127.0.0.1
-- 產生時間： 2022-05-20 11:41:02
-- 伺服器版本： 10.4.24-MariaDB
-- PHP 版本： 8.1.5

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
START TRANSACTION;
SET time_zone = "+00:00";

--
-- 資料庫: `order_system`
--

-- --------------------------------------------------------

--
-- 資料表結構 `order_`
--

CREATE TABLE `order_` (
  `OID` int(11) NOT NULL,
  `status` varchar(256) NOT NULL,
  `create_time` datetime NOT NULL,
  `finish_time` datetime NOT NULL,
  `distance` double NOT NULL,
  `price` int(11) NOT NULL,
  `category` varchar(256) NOT NULL,
  `UID` int(11) NOT NULL,
  `SID` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- --------------------------------------------------------

--
-- 資料表結構 `order_product`
--

CREATE TABLE `order_product` (
  `OID` int(11) NOT NULL,
  `PID` int(11) NOT NULL,
  `product_number` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- --------------------------------------------------------

--
-- 資料表結構 `product`
--

CREATE TABLE `product` (
  `PID` int(11) NOT NULL,
  `meal_name` varchar(256) NOT NULL,
  `price` int(11) NOT NULL,
  `picture` longblob NOT NULL,
  `picture_type` varchar(256) NOT NULL,
  `quantity` int(11) NOT NULL,
  `SID` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- 傾印資料表的資料 `product`
--

INSERT INTO `product` (`PID`, `meal_name`, `price`, `picture`, `picture_type`, `quantity`, `SID`) VALUES
(5, 'chicken', 50, 0x2f396a2f34414151536b5a4a5267414241514541594142674141442f3277424441414d4341674d4341674d4441774d4541774d45425167464251514542516f484277594944416f4d4441734b4377734e44684951445134524467734c4542595145524d55465255564441385847425955474249554652542f3277424441514d454241554542516b4642516b554451734e464251554642515546425155464251554642515546425155464251554642515546425155464251554642515546425155464251554642515546425155464251554642542f774141524341426b414751444153494141684542417845422f38514148774141415155424151454241514541414141414141414141414543417751464267634943516f4c2f3851417452414141674544417749454177554642415141414146394151494441415152425249684d5545474531466842794a7846444b426b61454949304b78775256533066416b4d324a7967676b4b4668635947526f6c4a69636f4b536f304e5459334f446b3651305246526b644953557054564656575631685a576d4e6b5a575a6e61476c7163335231646e643465587144684957476834694a69704b546c4a57576c35695a6d714b6a704b576d7036697071724b7a744c57327437693575734c44784d584778386a4a79744c54314e585731396a5a32754869342b546c3575666f3665727838765030396662332b506e362f38514148774541417745424151454241514542415141414141414141414543417751464267634943516f4c2f385141745245414167454342415144424163464241514141514a3341414543417845454253457842684a425551646863524d694d6f454946454b526f62484243534d7a55764156596e4c524368596b4e4f456c3852635947526f6d4a7967704b6a55324e7a67354f6b4e4552555a4853456c4b55315256566c64595756706a5a47566d5a326870616e4e3064585a3365486c36676f4f456859614869496d4b6b704f556c5a61586d4a6d616f714f6b7061616e714b6d7173724f3074626133754c6d367773504578636248794d6e4b3074505531646258324e6e613475506b3565626e364f6e7138765030396662332b506e362f396f4144414d42414149524178454150774436427676696a7156706b62743250657353362b4c477158436c6437495072585036772b57626d734864584f6d37464f4b7562313134697564526b4c54534d326655316530535579584b6a3378584c527438773572717643692b62716475754f72436d4b57695071503462366435476c77456a6b6a4e656b573866796a697555384777695054595150376f727234526861335245646953696c6f78544b494a6f7756497857487146766c713647526574554c69414e6e696c4a58417a3746666d41785735454d4c564731743972566f7176536c4852414c525337614b7534487768712f685739664a694379353741345036317a467a6f656f577a4553576b33344953507a4665756178623676613355454e765a69594f5144494747526b456b592f4164665775656d307a785239754f595a44444b56556b4f69684f3242786e4a39656e4e666e65493475774e47664a536a4b666d74462b4a395653794b74556a7a546b6f6e41773654664678697a75446e702b36622f4141727250446b4a3048556f5a74524b576b4b45466e6c63414c3965654b7479654874516853567451652f6b4d6d45506c757a4b63384146564a48636a6a337a5357756c36586661564e484a6473346235475835634a67455a773253652f543072773633476c6155313958704a4a6233312f4b7836454f486158492f6156473335487555487834384a2b453437644e52754c694f32626150746b6342654c35686e74383335447361374f782b4f58674f3675494c645045316b6b6b332b724d78614e4739506d594163397565612b4f395973394630533153336b3147534f61506174754a5152486a67486b4867416475443278584e654a4e55615456522f5a367266796e684930414c6c63384e6a3037317a30654e4d647a576e434c752f4e664c6336487737686d76636c4a6631364836547136736f495945455a42426f334c2f654835312b63477066456938384936584463365672463962616a486a64354e3054456f364162436472444f654d4556372f3841427a34323276784b3846323270584e324c545559324e7664786269463878514d73766f4343446a746e486176746374346a686d4630715454583961486859724a5a34564b546e6448302b57583146524e744c6452586c456572525853356931425a422f7379672f3171547a5a5636547959396d4e6579387835643448417342666152366d6d30484f525579734f784665532b644c752f31386e2f66527072545466383935502b2b6a5566326b763566784b2f73392f77417836397836696976497864544c7835386e2f66526f717637536a2f4b542f5a3876356a69492f45566e6353576b717978796d6244664c6a6e30342b707131665377795362316b77554733614d636b56347871467266773648643236366a48453062376f4756574c4c794f4d68736a365a344e614867587872644c686457733564504a7952647a534365496b636a427a7541497a79526a4939362f6e68564a4f4e376f2f545a59644c574a367234677654704d4d63736171516f334f6d4f5847636e4850586b31346634336d742f4466697157657868574a582f414e4b6c37426a6a6b5a50593963443172306954784e61654a4979756e616a702b72535278356357737975592b4f4e36673542345035563578385372464c7a52594a4150394e6337526d51446363457371703148487433504e4b6f6e4f5456724659644b43567a776e786a34716d754e59655235444a744c4e73666a47376a38786e394b33394a6a6c385079365666776269775952544d7742565363384e6a6f4d353631617350677a72486a4b366a68744c5437506170785064536b4b41784f6338354a504136446e4876584a6645377731726d6b66455a76433974717a5375736363732b6f534c68325a317a38696c6a774d67644f75612b68686c307034574e654b356166646c66573662712b7854764c735966784d31564e487659316a6c54624f3746413741463438456b38642b5258612f4150347436463450384c617659334d38743771736c36586873626443537732714e78664730416e337a78304e525166736f36644b736d7165494c2b383169376c5252436269596f497a6b636b4c6a2b6465683666384a374c512f44656e5731747039756c7849574d306b634b5a3239766d786e707a7a7a576c444f384e6c7355384d2b61615674724935385267336a50637136524c64683864744f61346a476f36664e596f2b4275686b3837616663625639756c656a61463469732f45466e4864614e716f6d696b4249454d6844444277515636676a304e655666454c346268744c74707253336774504a7a75565979475959474366662f414271746f58676d4b54515a726d306c5662674542764c515268574a48424859636a706976567776474657456234694b6c2b44504b725a46536c2f42664c2b4a376a4472577178735658554a5366547a5353503171374434703161506144644d332b38716e2b6c66494e3134756c302b4f343075354c517a48353432663567534d6a615431552b6e2f77437175752b412f7741554e6376486e30362b75473147327430456b666e48633458494733636565347858305648694f6a4b4c7159716a79785856613650722f77414d6554694d707155562b37715866592b6e762b456d314d66387645582f41414a42525764626f6c3362787a784d664c6b554d4f50352b3946665a5270554b6b564f4b5454506e6e56717032625a797439702b6d4e5073632b555a574b7873472b3865354939632b7639617047482b7a626435706a2f414b4f6a68534a6a744730637477546b39756772716452746448687670586b386e64475075534a794d633535376364613868315856706f7646466e4e65334c5357516c6c6b61575754624343507037593439362f6d7146483272736672716b75687a486a717930567465547972594c6454465a556d6759784861535279777752362f544665642b4562665774592b49576a50424464366c4a627a356b4d6d365a6f6f4d37574a4a364141396658334972326677626565472f697838586d7349726d4f527253795a347257535179655979344758485047477a67384841485469765464532b47757465457042612b48644c68386d39634e63535736716f50486641484135774f677a58746331544455755355573772356136484e5571303576326431637a4c58783562574e696254544a6f4c5659526d53575167755366346a6e67663456342f7743482f424f70654874597650452f69532f6876726d38645a57754335646e5a696341416a4f41423234365972314738384754366263773363326b584b337533594741334b51707a774d45382f57712f696a52622f554c524c75344d635346647176744a59384563675a4949493664754b345a5a686970552f59546d33485257364a4c736c6f6a504434616a516e37536d74575849377a543778595a7072794a493134574e706745343645676e357334794f77794b326f3951682f647645595a4552764c336c77634534787944314f6138707337694b78687472472f6b686d6e6c2b597879763872677351434f652f6270314761366e783972326b2f7744434749797977424953696d797478675a59395051394366546731357a776a356c474c66334863367433716a7174536c4e30787562746d386c475a465442416630507632783769734a346c746265366a6a492b7a7445374f4a7838707a3050487633394b7966422b745258336736336d3144576f4861326434454d38696f373758326a4f546c695150727a2b4a6c3859585258777a642f77436c784758496a625953484934786d7366717461453343526171516130506d547844665353616c714b7941686b6b6b41336a4f33446442394f422b64646c2b7a394d49626a564e547570504b6a5a566752534d427a6e4c48384d443836382f77426576744e58584a62563773534b736a4a49364866745038525050726e38363961384f65483231617a67476b576276626b414a3553454c6a36312b6a56714c6e68315261306c5a4879654b72714d3362552b6950445069693069306142544d7035624850624a6f726a4e4e2b462b6f2f5934397832484833546d6976317a42554668734e546f76374b532b35487756575471564a5374757a316e5776422b6c61386858554c4f4f366a492b354954742f4c4f4b774a50684434504d5563546547644c614b4e6936493971724b47376e424857753974375757363556666b3775656c61317461513257474b65624a2f656274394b2f436371794c4d4d7a744b44634b6664332f4264663631507373526a3455465a753737486e4e6e345438502b43645273623248544c50526265453770354c5331534f5149546a6a4335786a672b334e6531365066523365755872774e356953527179746b7358516a67446e41366e746d7556314f33746457514c6378623148415948474d6a422b763430756a5855336865526a626733466f4e7a4d70414c38386b442b646657787962453550576454577053625476764a575674563239446c2b7555635a545558377337664a36392f387a7350374e6976744b454d7354466b54695751414f423178782b583456383466456a7a57456d6b573035736f566c4b6a6e49494c593579654d6e505031723337546647326d336d6e70474c687265355a6d56556c54617779654f4b2b59506a446557762f435158674d792f652f65534f565542654f4f6570352f57766d4d366e51724f6a4b67303736614874355643704763347a54566a784c786e453172716e3261576543495772374c6f37737353474a2b584f665959486f4f6c6355327258614d2b7a7970346e4452787a544a2f716c7a6a30347a302f77414d31702b4e4a4c4f4f2b65574e6c53786a4a694e79784a615a774267652f474f653163524a715839703667734d4d6f5346526c6d7a68413349417a376461374d4a6833794b79766f656c58714b4c31646a36332f5a61385861486f2f7733767266567062654b392f74475635636a69544b4a673550586a6a384b372f784a7150676e78565a7952586d6e365a66576a63474f61424844665545563864327364767039696c74616c6d56795a4378596b75784179657674307263307277357275714a69306a6e69542b3979425870342f475378474868686c4c6c6a486439332f6b66505277366a566c5876717a3641302f777a344230316a2f5a33687652626642344d4e6c45702f51563173506a44517642756c7465584b526f546c626131685651387259364164674f353644394b2b6574466d6a384c58506b61727154543361386d30742f6e6b482b3932582f4149455258612b4776426c35347531442b3264564451327259454e76744a77672b366f3434483879536178792f43716c55574b7253756f3758367676364c387948423133374f4b30653531413861654c76456d623230614f7874324f314959565461415064736b2f5839425258555132736472456b55595a45515943714d592f53697661655a566d373833346e62484155556b755648717a495248674562656d30444148307174355468386a3961356136747458443569313636677a794974317577502f41483145542b7452666166466b4b6b526170704c342f6975724e6e6238536b7144394b2b746a6d3246747936723548793073727848537a2b5a325452715267382b754f615a745665446a386138397674612b4a73667a5764743455752f547a5263785a2f41467635317832752b4e666a746137785a65466643633548654f346c5a763841782b524b33575a595637534d76375078433369653133476c5158515a6954464b7778356b654d6a4279434d6a475165354665632b4b76676a4c3467745a5932385233467835724d57613974346d7a6b65694b6f4f50706e394b384538566645763970525766626f3636636e50476e57554d33355a4c6d764a2f4558784f2b4e736a4e2f616d73654a37503138744a4c55662b4f4b6f7279366c484b36307561564b4c666f6a75704c485566686d3065312b4c76324b6250566b7468712f6a6934533074382b565a324e714939784a504a79357965657072497366325466426e682b485a4e7164314a45707a746d6e4344386359723571314c7854346f3147566a66363571317a4a332b30587372483957714331572b6e595a6d6d63352f7743657850384157766e386667735669587959617371564e644574666d376e625462767a3166656c335a397565442f414146345330657a386a5430686e454a494441686d556465745a6e6a76783970396a7037365834656d55336b6e7953585676676942652b317637333036665846664e48687651376f6c5a4a704a31516a42565a694d6a30505053765950682f3454625772794e664a62374b682b6239353172352b6a772f4768572b735969733570645038397a766a4e79584b6b61667731384470714632722b5352624b3235325a526c7a6e504a5057766f434e30686852456a41565267414b6f2f70565054624f4c53624e4959625a596b55597835754b6e6136497a2b377966384172734b39477257396f7a304b56467751397056374b542f7746614b67613449504d5038413547416f726d4f726c50592f694a70646e61364870462f62577356744c64722b39534a63496370752b373961347459773748506632482b46464665396d71554d584a5230576838396c6263734c467931656f2b5733526c50585031716f75324e5a5473556c63594a39364b4b38356e6f457331756874743547342b6a4145644d31517556565741434b4166396b55555669396a61426a3668706c6865626b6e302b316c4743637643704a786e31465973337738384e5843794d32683249595a4f5668565478394b4b4b6e6d6b6e6f7a705559396a463144345a2b473547326a54556a485439327a447639616c306251724c77334945736f6469384844456e72525257366c4a78315a7a754b356c6f645173774f4d77786b6a6f32446e2b644e334a49716b77522f4d634869696975487164556469755a782f7a78692f464166353055555546482f2f32513d3d, 'image/jpeg', 30, 2);

-- --------------------------------------------------------

--
-- 資料表結構 `shop`
--

CREATE TABLE `shop` (
  `SID` int(11) NOT NULL,
  `shop_name` varchar(256) NOT NULL,
  `shop_location` geometry NOT NULL,
  `phonenumber` varchar(10) NOT NULL,
  `shop_category` varchar(256) NOT NULL,
  `UID` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- 傾印資料表的資料 `shop`
--

INSERT INTO `shop` (`SID`, `shop_name`, `shop_location`, `phonenumber`, `shop_category`, `UID`) VALUES
(2, 'sam shop', 0x0000000001010000000000000000004b40713d0ad7a3703740, '0961121575', 'fast food', 7);

-- --------------------------------------------------------

--
-- 資料表結構 `trade_record`
--

CREATE TABLE `trade_record` (
  `TID` int(11) NOT NULL,
  `trade_behavior` varchar(256) NOT NULL,
  `OID` int(11) NOT NULL,
  `UID` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- --------------------------------------------------------

--
-- 資料表結構 `user`
--

CREATE TABLE `user` (
  `UID` int(11) NOT NULL,
  `account` varchar(256) NOT NULL,
  `password` varchar(256) NOT NULL,
  `user_name` varchar(256) NOT NULL,
  `identity` varchar(256) NOT NULL,
  `user_location` geometry NOT NULL,
  `phonenumber` varchar(10) NOT NULL,
  `money` int(11) NOT NULL,
  `salt` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- 傾印資料表的資料 `user`
--

INSERT INTO `user` (`UID`, `account`, `password`, `user_name`, `identity`, `user_location`, `phonenumber`, `money`, `salt`) VALUES
(7, 'sam', 'f35d027d3d74e5ee565b8a5cd1b8b5c2d81a8676c1cf621a5b65f6e55c8f2d96', 'sam', 'manager', 0x0000000001010000009a99999999195e40cdcccccccc8c3740, '0961121575', 0, 3270),
(8, 'xuan', '36d896b9ba80ae67215ebe8902683dd34109693d4af75a1363c05f3c7fa3a382', 'xuanchen', 'normal', 0x00000000010100000003dfe134cc6059404bab21718f693e40, '0966696301', 0, 4740);

--
-- 已傾印資料表的索引
--

--
-- 資料表索引 `order_`
--
ALTER TABLE `order_`
  ADD PRIMARY KEY (`OID`),
  ADD KEY `SID` (`SID`),
  ADD KEY `UID` (`UID`);

--
-- 資料表索引 `order_product`
--
ALTER TABLE `order_product`
  ADD PRIMARY KEY (`OID`,`PID`),
  ADD KEY `PID` (`PID`);

--
-- 資料表索引 `product`
--
ALTER TABLE `product`
  ADD PRIMARY KEY (`PID`),
  ADD UNIQUE KEY `meal_name` (`meal_name`),
  ADD KEY `SID` (`SID`);

--
-- 資料表索引 `shop`
--
ALTER TABLE `shop`
  ADD PRIMARY KEY (`SID`),
  ADD UNIQUE KEY `shop_name` (`shop_name`),
  ADD KEY `UID` (`UID`);

--
-- 資料表索引 `trade_record`
--
ALTER TABLE `trade_record`
  ADD PRIMARY KEY (`TID`),
  ADD KEY `OID` (`OID`),
  ADD KEY `UID` (`UID`);

--
-- 資料表索引 `user`
--
ALTER TABLE `user`
  ADD PRIMARY KEY (`UID`),
  ADD UNIQUE KEY `account` (`account`);

--
-- 在傾印的資料表使用自動遞增(AUTO_INCREMENT)
--

--
-- 使用資料表自動遞增(AUTO_INCREMENT) `order_`
--
ALTER TABLE `order_`
  MODIFY `OID` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=2;

--
-- 使用資料表自動遞增(AUTO_INCREMENT) `product`
--
ALTER TABLE `product`
  MODIFY `PID` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=6;

--
-- 使用資料表自動遞增(AUTO_INCREMENT) `shop`
--
ALTER TABLE `shop`
  MODIFY `SID` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=3;

--
-- 使用資料表自動遞增(AUTO_INCREMENT) `trade_record`
--
ALTER TABLE `trade_record`
  MODIFY `TID` int(11) NOT NULL AUTO_INCREMENT;

--
-- 使用資料表自動遞增(AUTO_INCREMENT) `user`
--
ALTER TABLE `user`
  MODIFY `UID` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=9;

--
-- 已傾印資料表的限制式
--

--
-- 資料表的限制式 `order_`
--
ALTER TABLE `order_`
  ADD CONSTRAINT `order__ibfk_1` FOREIGN KEY (`SID`) REFERENCES `shop` (`SID`),
  ADD CONSTRAINT `order__ibfk_2` FOREIGN KEY (`UID`) REFERENCES `user` (`UID`);

--
-- 資料表的限制式 `order_product`
--
ALTER TABLE `order_product`
  ADD CONSTRAINT `order_product_ibfk_1` FOREIGN KEY (`OID`) REFERENCES `order_` (`OID`),
  ADD CONSTRAINT `order_product_ibfk_2` FOREIGN KEY (`PID`) REFERENCES `product` (`PID`);

--
-- 資料表的限制式 `product`
--
ALTER TABLE `product`
  ADD CONSTRAINT `product_ibfk_1` FOREIGN KEY (`SID`) REFERENCES `shop` (`SID`);

--
-- 資料表的限制式 `shop`
--
ALTER TABLE `shop`
  ADD CONSTRAINT `shop_ibfk_1` FOREIGN KEY (`UID`) REFERENCES `user` (`UID`);

--
-- 資料表的限制式 `trade_record`
--
ALTER TABLE `trade_record`
  ADD CONSTRAINT `trade_record_ibfk_1` FOREIGN KEY (`OID`) REFERENCES `order_` (`OID`),
  ADD CONSTRAINT `trade_record_ibfk_2` FOREIGN KEY (`UID`) REFERENCES `user` (`UID`);
COMMIT;